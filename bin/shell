#!/bin/zsh
# SPDX-License-Identifier: MIT
# Copyright (c) 2025 Noodle-Bytes. All Rights Reserved

# Check for SLATE_ROOT already being set in the shell
if [[ "$SLATE_ROOT" != "" ]]; then
    echo "[\033[0;31mERROR\033[0m] Slate shell is already activated!"
    exit 1
fi

# Work out where the repository is located
SLATE_ROOT=$(readlink -f ${0:a:h}/..)

USER_HISTFILE=${HISTFILE:-$HOME/.zsh_history}

SLATE_ROOT=$SLATE_ROOT \
    USER_HISTFILE=$USER_HISTFILE \
    ZDOTDIR=$SLATE_ROOT/bin/zsh \
    /bin/zsh -i $@
s
